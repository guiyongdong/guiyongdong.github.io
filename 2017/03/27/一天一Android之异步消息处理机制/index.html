
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="è´µå¤§å¤´çš„åšå®¢">
    <title>ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶ - è´µå¤§å¤´çš„åšå®¢</title>
    <meta name="author" content="è´µæ°¸å†¬">
<link rel="icon" href="https://github.com/guiyongdong/Resource/blob/master/hexoImage/favicon.ico?raw=true">
    
    
        <link rel="icon" href="https://github.com/guiyongdong/Resource/blob/master/hexoImage/favicon.ico?raw=true">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="æ— è®ºæ˜¯Androidè¿˜æ˜¯iOSï¼Œå…³äºUIçš„æ“ä½œéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„UIæ“ä½œåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨å­çº¿ç¨‹ä¸­åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œèµ„æºçš„è¯·æ±‚ï¼Œå½“è¿™äº›è€—æ—¶æ“ä½œç»“æŸæ—¶ï¼Œæˆ‘ä»¬åˆå¸Œæœ›æ‹¿è¿™äº›è¯·æ±‚ä¸‹æ¥çš„èµ„æºå»æ›´æ–°UIï¼Œä½†æ˜¯å½“å‰çº¿ç¨‹ä¸ºå­çº¿ç¨‹ï¼Œè€Œæ›´æ–°UIç”±å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†çº¿ç¨‹é—´çš„é€šä¿¡é—®é¢˜ã€‚
å­¦è¿‡iOSçš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨GCDæˆ–è€…performSelectorOnMainThre">
<meta property="og:type" content="blog">
<meta property="og:title" content="ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶">
<meta property="og:url" content="http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/index.html">
<meta property="og:site_name" content="è´µå¤§å¤´çš„åšå®¢">
<meta property="og:description" content="æ— è®ºæ˜¯Androidè¿˜æ˜¯iOSï¼Œå…³äºUIçš„æ“ä½œéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„UIæ“ä½œåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨å­çº¿ç¨‹ä¸­åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œèµ„æºçš„è¯·æ±‚ï¼Œå½“è¿™äº›è€—æ—¶æ“ä½œç»“æŸæ—¶ï¼Œæˆ‘ä»¬åˆå¸Œæœ›æ‹¿è¿™äº›è¯·æ±‚ä¸‹æ¥çš„èµ„æºå»æ›´æ–°UIï¼Œä½†æ˜¯å½“å‰çº¿ç¨‹ä¸ºå­çº¿ç¨‹ï¼Œè€Œæ›´æ–°UIç”±å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†çº¿ç¨‹é—´çš„é€šä¿¡é—®é¢˜ã€‚
å­¦è¿‡iOSçš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨GCDæˆ–è€…performSelectorOnMainThre">
<meta property="og:image" content="http://img.blog.csdn.net/20140805002935859?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG1qNjIzNTY1Nzkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2017-03-31T09:02:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶">
<meta name="twitter:description" content="æ— è®ºæ˜¯Androidè¿˜æ˜¯iOSï¼Œå…³äºUIçš„æ“ä½œéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„UIæ“ä½œåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨å­çº¿ç¨‹ä¸­åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œèµ„æºçš„è¯·æ±‚ï¼Œå½“è¿™äº›è€—æ—¶æ“ä½œç»“æŸæ—¶ï¼Œæˆ‘ä»¬åˆå¸Œæœ›æ‹¿è¿™äº›è¯·æ±‚ä¸‹æ¥çš„èµ„æºå»æ›´æ–°UIï¼Œä½†æ˜¯å½“å‰çº¿ç¨‹ä¸ºå­çº¿ç¨‹ï¼Œè€Œæ›´æ–°UIç”±å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†çº¿ç¨‹é—´çš„é€šä¿¡é—®é¢˜ã€‚
å­¦è¿‡iOSçš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨GCDæˆ–è€…performSelectorOnMainThre">
<meta name="twitter:image" content="http://img.blog.csdn.net/20140805002935859?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG1qNjIzNTY1Nzkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
    
    
        
    
    
        <meta property="og:image" content="http://www.guiyongdong.com/assets/images/header.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-yrst5vo1nxaxbp2g3v9na2wg1lixlpr3ghbjdvskeixmu79deycecx3rh4bt.min.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">è´µå¤§å¤´çš„åšå®¢</a>
    </div>
    
        
            <a  class="header-right-icon "
                href="#about">
        
        
            <i class="fa fa-lg fa-header.jpg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/header.jpg" alt="ä½œè€…çš„å›¾ç‰‡"/>
                </a>
                <h4 class="sidebar-profile-name">è´µæ°¸å†¬</h4>
                
                    <h5 class="sidebar-profile-bio"><p>iOSå¼€å‘è€…<br> ä¼šä¸€ç‚¹RNå’Œandroid,  åè¶³çš„æµ·è´¼è¿·</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">åˆ†ç±»</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/guiyongdong" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:564024928@qq.com" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">é‚®ç®±</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">è®¢é˜…</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" datetime="2017-03-27T17:37:50+08:00">
	
		    3æœˆ 27, 2017
    	
    </time>
    
</div>

</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p>æ— è®ºæ˜¯<code>Android</code>è¿˜æ˜¯<code>iOS</code>ï¼Œå…³äºUIçš„æ“ä½œéƒ½æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„UIæ“ä½œåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨å­çº¿ç¨‹ä¸­åšä¸€äº›è€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œèµ„æºçš„è¯·æ±‚ï¼Œå½“è¿™äº›è€—æ—¶æ“ä½œç»“æŸæ—¶ï¼Œæˆ‘ä»¬åˆå¸Œæœ›æ‹¿è¿™äº›è¯·æ±‚ä¸‹æ¥çš„èµ„æºå»æ›´æ–°UIï¼Œä½†æ˜¯å½“å‰çº¿ç¨‹ä¸ºå­çº¿ç¨‹ï¼Œè€Œæ›´æ–°UIç”±å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†çº¿ç¨‹é—´çš„é€šä¿¡é—®é¢˜ã€‚</p>
<p>å­¦è¿‡iOSçš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>GCD</code>æˆ–è€…<code>performSelectorOnMainThread:</code>ç­‰æŠ€æœ¯æ¥è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ã€‚è€Œåœ¨Androidä¸­ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨åˆ°å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶äº†ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è¯¦ç»†è¯´ä¸€ä¸‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶ã€‚</p>
<a id="more"></a>
<h3 id="çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ"><a href="#çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ"></a>çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ</h3><h5 id="runOnUiThread"><a href="#runOnUiThread" class="headerlink" title="runOnUiThread"></a>runOnUiThread</h5><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>runOnUiThread</code>è¿™ç§æ–¹å¼å›åˆ°ä¸»çº¿ç¨‹æ˜¯æœ€ä¸ºæ–¹ä¾¿ï¼Œä»£ç é‡ä¹Ÿæ¯”è¾ƒå°‘ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹å¼ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestData</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="comment">//å­çº¿ç¨‹æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></div><div class="line">                Thread.sleep(<span class="number">3000</span>);</div><div class="line">                runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                        <span class="comment">//ä¸»çº¿ç¨‹æ›´æ–°UI</span></div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;).start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› ä¸ºè¿™ç§æ–¹å¼ä½¿ç”¨ç®€å•ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å†ç»†è¯´ã€‚</p>
<h5 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h5><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Handler</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> Handler mHandler;</div><div class="line">    <span class="keyword">private</span> TextView mTextView;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line"></div><div class="line">        mTextView = (TextView) findViewById(R.id.textView);</div><div class="line"></div><div class="line">        Button onUIButton = (Button) findViewById(R.id.button);</div><div class="line">        onUIButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                requestData();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºHandler</span></div><div class="line">        mHandler = <span class="keyword">new</span> Handler(<span class="keyword">new</span> Handler.Callback() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">                <span class="comment">//æ¥å—åˆ°æ¶ˆæ¯</span></div><div class="line">                String str = (String) msg.obj;</div><div class="line">                mTextView.setText(str);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestData</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="comment">//å­çº¿ç¨‹æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></div><div class="line">                    Thread.sleep(<span class="number">3000</span>);</div><div class="line">                    Message message = <span class="keyword">new</span> Message();</div><div class="line">                    message.obj = <span class="string">"æ¶ˆæ¯"</span>;</div><div class="line">                    <span class="comment">//handlerå‘é€æ¶ˆæ¯</span></div><div class="line">                    mHandler.sendMessage(message);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»º<code>Handler</code>ï¼Œåœ¨<code>requestData</code>æ–¹æ³•ä¸­ï¼Œå¼€å¯ä¸€ä¸ªå­çº¿ç¨‹ï¼Œå­çº¿ç¨‹ä¸­æ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼Œæ“ä½œç»“æŸåï¼Œä½¿ç”¨<code>Handler</code>å‘é€æ¶ˆæ¯ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ›´æ–°UIã€‚</p>
<p>è¿™ç§æ–¹å¼åœ¨å¼€å‘ä¸­ä½¿ç”¨çš„æœ€é¢‘ç¹ï¼Œè‡³äºå…¶ä¸­çš„åŸç†ï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥æ¢ç©¶ã€‚</p>
<h3 id="HandleråŸç†å‰–æ"><a href="#HandleråŸç†å‰–æ" class="headerlink" title="HandleråŸç†å‰–æ"></a>HandleråŸç†å‰–æ</h3><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºHandleræ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºï¼Œå¯èƒ½ä½ ä¼šæƒ³äº†ï¼Œæˆ‘åœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºè¡Œä¹ˆï¼Ÿæˆ‘ä»¬æ¥ç”¨ä»£ç å®éªŒä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">      </div><div class="line">    <span class="keyword">private</span> Handler handler1;  </div><div class="line">      </div><div class="line">    <span class="keyword">private</span> Handler handler2;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.activity_main);  </div><div class="line">        handler1 = <span class="keyword">new</span> Handler();  </div><div class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">                handler2 = <span class="keyword">new</span> Handler();  </div><div class="line">            &#125;  </div><div class="line">        &#125;).start();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šæ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»º<code>handler1</code>ï¼Œåœ¨å­çº¿ç¨‹ä¸­åˆ›å»º<code>handler2</code>ã€‚å½“æ˜¯ï¼Œå½“æˆ‘ä»¬å…è®¸ç¨‹åºçš„æ—¶å€™ï¼Œç¨‹åºç«Ÿç„¶å´©æºƒäº†ï¼Œé”™è¯¯æç¤ºä¿¡æ¯æ˜¯Canâ€™t create handler inside thread that has not called Looper.prepare()ã€‚è¯´æ˜¯ä¸èƒ½å†æ²¡æœ‰è°ƒç”¨<code>Looper.prepare()</code>çš„çº¿ç¨‹ä¸­åˆ›å»º<code>Handler</code>ã€‚é‚£ç³»ç»Ÿæ—¢ç„¶è¿™ä¹ˆè¯´äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åœ¨å­çº¿ç¨‹ä¸­æ·»åŠ è¿™å¥ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">        Looper.prepare();  </div><div class="line">        handler2 = <span class="keyword">new</span> Handler();  </div><div class="line">    &#125;  </div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<p>æœç„¶ä¸ä¼šå´©æºƒäº†ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h5 id="Handlerä¸Looperçš„å…³ç³»"><a href="#Handlerä¸Looperçš„å…³ç³»" class="headerlink" title="Handlerä¸Looperçš„å…³ç³»"></a>Handlerä¸Looperçš„å…³ç³»</h5><p>ä¸ºä»€ä¹ˆåœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºHandlerä¼šå´©æºƒå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>Handler</code>çš„æœ‰å‚å’Œæ— å‚æ„é€ æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(<span class="keyword">null</span>, <span class="keyword">false</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Callback callback)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(callback, <span class="keyword">false</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‘ç°ä»–ä»¬éƒ½è°ƒç”¨äº†<code>public Handler(Callback callback, boolean async)</code>è¿™ä¸ªæ–¹æ³•ï¼Œæ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (FIND_POTENTIAL_LEAKS) &#123;</div><div class="line">        <span class="keyword">final</span> Class&lt;? extends Handler&gt; klass = getClass();</div><div class="line">        <span class="keyword">if</span> ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp;</div><div class="line">                (klass.getModifiers() &amp; Modifier.STATIC) == <span class="number">0</span>) &#123;</div><div class="line">            Log.w(TAG, <span class="string">"The following Handler class should be static or leaks might occur: "</span> +</div><div class="line">                klass.getCanonicalName());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    mLooper = Looper.myLooper();</div><div class="line">    <span class="keyword">if</span> (mLooper == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">            <span class="string">"Can't create handler inside thread that has not called Looper.prepare()"</span>);</div><div class="line">    &#125;</div><div class="line">    mQueue = mLooper.mQueue;</div><div class="line">    mCallback = callback;</div><div class="line">    mAsynchronous = async;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç°è¿™æ®µä»£ç æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ­£å¥½æ˜¯åˆšæ‰æˆ‘ä»¬æ²¡æœ‰åˆ›å»º<code>Handler</code>çš„æ—¶å€™æ‰€å‡ºç°çš„ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™æ®µä»£ç ä¸­ï¼Œè°ƒç”¨äº†<code>Looper.myLooper()</code>æ–¹æ³•è·å–ä¸€ä¸ªLooperå¯¹è±¡ï¼Œå¦‚æœLooperå¯¹è±¡ä¸ºç©ºï¼Œå°±ä¼šæŠ›å¼‚å¸¸ï¼Œé‚£ä»€ä¹ˆæ—¶å€™Looperå¯¹è±¡ä¸ºç©ºå‘¢ï¼Ÿæˆ‘ä»¬å†æ¥çœ‹çœ‹<code>Looper.myLooper()</code>ä¸­çš„ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="meta">@Nullable</span> <span class="function">Looper <span class="title">myLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> sThreadLocal.get();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä»<code>sThreadLocal</code>å¯¹è±¡ä¸­å–å‡º<code>Looper</code>ï¼Œå¦‚æœ<code>sThreadLocal</code>ä¸­æœ‰<code>Looper</code>å­˜åœ¨å°±è¿”å›<code>Looper</code>ï¼Œå¦åˆ™è¿”å›ç©ºã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨ä»€ä¹ˆæ—¶å€™ç»™<code>sThreadLocal</code>è®¾ç½®<code>Looper</code>å‘¢ï¼Ÿç»éªŒå¾—å‡ºï¼Œè‚¯å®šæ˜¯<code>Looper.prepare()</code>ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œç¨‹åºä¼šå´©æºƒã€‚ğŸ˜„</p>
<p>æˆ‘ä»¬æ¥çœ‹<code>Looper.prepare()</code>æ–¹æ³•çš„æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</div><div class="line">    prepare(<span class="keyword">true</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(<span class="keyword">boolean</span> quitAllowed)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (sThreadLocal.get() != <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Only one Looper may be created per thread"</span>);</div><div class="line">    &#125;</div><div class="line">    sThreadLocal.set(<span class="keyword">new</span> Looper(quitAllowed));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>prepare</code>æ–¹æ³•åˆè°ƒç”¨äº†<code>prepare(boolean quitAllowed)</code>æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹<code>prepare(boolean quitAllowed)</code>æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆåˆ¤æ–­<code>sThreadLocal</code>ä¸­æ˜¯å¦å·²ç»å­˜åœ¨<code>Looper</code>äº†ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¢<code>Looper</code>å¹¶è®¾ç½®ç»™<code>sThreadLocal</code>ã€‚è¿™å°±è§£é‡Šäº†ï¼Œæˆ‘ä»¬åˆ›å»º<code>Handler</code>çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆå¿…é¡»å…ˆè°ƒç”¨<code>Looper.prepare()</code>æ–¹æ³•ã€‚å¦‚æœå·²ç»å­˜åœ¨ï¼Œä¼šæŠ›å¼‚å¸¸ã€‚ç”±æ­¤å¾—å‡ºï¼Œä¸€ä¸ªçº¿ç¨‹ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ª<code>Looper</code>ã€‚</p>
<p>å¯èƒ½ä½ è¿˜ä¼šç–‘æƒ‘ï¼Œæˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹åˆ›å»º<code>Handler</code>åˆ°æ—¶å€™å¹¶æ²¡æœ‰å»è°ƒç”¨<code>Looper.prepare()</code>æ–¹æ³•ï¼Œç¨‹åºä¹Ÿæ²¡æœ‰å´©æºƒå•Šã€‚è¿™æ˜¯å› ä¸ºåœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨è°ƒç”¨äº†<code>Looper.prepare()</code>æ–¹æ³•ã€‚çœ‹<code>ActivityThread</code>ä¸­çš„<code>main()</code>æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </div><div class="line">    SamplingProfilerIntegration.start();  </div><div class="line">    CloseGuard.setEnabled(<span class="keyword">false</span>);  </div><div class="line">    Environment.initForCurrentUser();  </div><div class="line">    EventLogger.setReporter(<span class="keyword">new</span> EventLoggingReporter());  </div><div class="line">    Process.setArgV0(<span class="string">"&lt;pre-initialized&gt;"</span>);  </div><div class="line">    Looper.prepareMainLooper();  </div><div class="line">    ActivityThread thread = <span class="keyword">new</span> ActivityThread();  </div><div class="line">    thread.attach(<span class="keyword">false</span>);  </div><div class="line">    <span class="keyword">if</span> (sMainThreadHandler == <span class="keyword">null</span>) &#123;  </div><div class="line">        sMainThreadHandler = thread.getHandler();  </div><div class="line">    &#125;  </div><div class="line">    AsyncTask.init();  </div><div class="line">    <span class="keyword">if</span> (<span class="keyword">false</span>) &#123;  </div><div class="line">        Looper.myLooper().setMessageLogging(<span class="keyword">new</span> LogPrinter(Log.DEBUG, <span class="string">"ActivityThread"</span>));  </div><div class="line">    &#125;  </div><div class="line">    Looper.loop();  </div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Main thread loop unexpectedly exited"</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿå¸®æˆ‘ä»¬è°ƒç”¨äº†<code>Looper.prepareMainLooper()</code>æ–¹æ³•ï¼Œè€Œè¿™ä¸ªæ–¹æ³•åˆä¼šå†å»è°ƒç”¨<code>Looper.prepare()</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepareMainLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">    prepare(<span class="keyword">false</span>);</div><div class="line">    <span class="keyword">synchronized</span> (Looper.class) &#123;</div><div class="line">        <span class="keyword">if</span> (sMainLooper != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The main Looper has already been prepared."</span>);</div><div class="line">        &#125;</div><div class="line">        sMainLooper = myLooper();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å› æ­¤æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„ä¸»çº¿ç¨‹ä¸­å§‹ç»ˆå­˜åœ¨ä¸€ä¸ª<code>Looper</code>å¯¹è±¡ï¼Œä»è€Œä¸éœ€è¦å†åŠ¨æ‰‹å»è°ƒç”¨<code>Looper.prepare()</code>ã€‚</p>
<p>è¿™æ ·å…³äº<code>Handler</code>å’Œ<code>Looper</code>çš„å…³ç³»å°±å¾ˆæ˜ç¡®äº†ï¼Œ<code>Handler</code>çš„åˆ›å»ºä¾èµ–ä¸<code>Looper</code>ã€‚ä¸€ä¸ªçº¿ç¨‹ä¸­è‡³å¤šæœ‰ä¸€ä¸ª<code>Handler</code>ã€‚</p>
<h5 id="Handlerã€Messageã€Looperçš„æ¶ˆæ¯æœºåˆ¶"><a href="#Handlerã€Messageã€Looperçš„æ¶ˆæ¯æœºåˆ¶" class="headerlink" title="Handlerã€Messageã€Looperçš„æ¶ˆæ¯æœºåˆ¶"></a>Handlerã€Messageã€Looperçš„æ¶ˆæ¯æœºåˆ¶</h5><p>æˆ‘ä»¬å·²ç»æ˜ç™½äº†<code>Handler</code>å’Œ<code>Looper</code>ä¹‹é—´çš„å¤§æ¦‚å…³ç³»ï¼Œé‚£ä¹ˆè¿™ä¸‰è€…ä¹‹é—´çš„å…·ä½“æ˜¯å¦‚ä½•ååŒæ“ä½œçš„å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>Handler</code>æ˜¯å¦‚ä½•å‘é€æ¶ˆæ¯çš„:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">        Message message = <span class="keyword">new</span> Message();  </div><div class="line">        message.arg1 = <span class="number">1</span>;  </div><div class="line">        Bundle bundle = <span class="keyword">new</span> Bundle();  </div><div class="line">        bundle.putString(<span class="string">"data"</span>, <span class="string">"data"</span>);  </div><div class="line">        message.setData(bundle);  </div><div class="line">        handler.sendMessage(message);  </div><div class="line">    &#125;  </div><div class="line">&#125;).start();</div></pre></td></tr></table></figure>
<p>å…¶å®Messageåªæ˜¯ä¸€ä¸ªè½½ä½“ï¼Œå®ƒå¯ä»¥ä½¿ç”¨<code>setData()</code>æˆ–<code>arg</code>å‚æ•°ç­‰æ–¹æ³•æ¥æºå¸¦ä¸€äº›æ•°æ®ï¼Œç„¶åé€šè¿‡<code>Handler</code>å°†æ¶ˆæ¯å‘é€å‡ºå»ã€‚</p>
<p>é‚£ä¹ˆ<code>Handler</code>æŠŠ<code>Message</code>å‘é€åˆ°å“ªé‡Œäº†å‘¢ï¼Ÿè€Œä¸”æˆ‘ä»¬åˆå¯ä»¥åœ¨<code>Handler</code>çš„<code>handleMessage()</code>æ–¹æ³•ä¸­é‡æ–°å¾—åˆ°è¿™æ¡<code>Message</code>å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹<code>Handler</code>çš„<code>sendMessage</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">sendMessage</span><span class="params">(Message msg)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> sendMessageDelayed(msg, <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">sendMessageDelayed</span><span class="params">(Message msg, <span class="keyword">long</span> delayMillis)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (delayMillis &lt; <span class="number">0</span>) &#123;</div><div class="line">        delayMillis = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">    MessageQueue queue = mQueue;</div><div class="line">    <span class="keyword">if</span> (queue == <span class="keyword">null</span>) &#123;</div><div class="line">        RuntimeException e = <span class="keyword">new</span> RuntimeException(</div><div class="line">                <span class="keyword">this</span> + <span class="string">" sendMessageAtTime() called with no mQueue"</span>);</div><div class="line">        Log.w(<span class="string">"Looper"</span>, e.getMessage(), e);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¾—è½¬ååˆ™æœ€åè°ƒç”¨äº†<code>sendMessageAtTime</code>ï¼Œåœ¨æ­¤æ–¹æ³•çš„å†…éƒ¨ï¼Œåˆè°ƒç”¨äº†<code>enqueueMessage</code>æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°<code>queue</code>å°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®ƒå°†æ‰€æœ‰æ”¶åˆ°çš„æ¶ˆæ¯ä»¥é˜Ÿåˆ—çš„å½¢å¼è¿›è¡Œæ’åˆ—ï¼Œå¹¶æä¾›å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„æ“ä½œï¼Œå…¶å®å½“å‰<code>Handler</code>ä¸­çš„<code>queue</code>æ˜¯ç”±<code>Looper</code>åˆ›å»ºçš„ï¼Œ<code>Handler</code>åªæ˜¯å¼•ç”¨äº†æ­¤<code>queue</code>ï¼Œæˆ‘ä»¬æŸ¥çœ‹<code>Handler</code>çš„æ„é€ æ–¹æ³•ï¼Œé‡Œé¢ä¼šæœ‰è¿™æ ·ä¸¤å¥ä»£ç :<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</div><div class="line">	...</div><div class="line">	mLooper = Looper.myLooper();</div><div class="line">	...</div><div class="line">	mQueue = mLooper.mQueue;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å› æ­¤ï¼Œä¸€ä¸ªLooperä¹Ÿå°±åªæœ‰ä¸€ä¸ª<code>MessageQueue</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°msgå°±æ˜¯æˆ‘ä»¬æ‰€è¦å‘é€çš„æ¶ˆæ¯<code>Message</code>ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°<code>uptimeMillis</code>åˆ™è¡¨ç¤ºå‘é€æ¶ˆæ¯çš„æ—¶é—´ï¼Œå®ƒçš„å€¼ç­‰äºç³»ç»Ÿå¼€æœºåˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°å†åŠ ä¸Šå»¶è¿Ÿæ—¶é—´ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨çš„ä¸æ˜¯<code>endMessageDelayed()</code>æ–¹æ³•ï¼Œå»¶è¿Ÿæ—¶é—´å°±æ˜¯0ã€‚ç„¶åæˆ‘ä»¬å†æ¥çœ‹è°ƒç”¨çš„<code>enqueueMessage</code>æ–¹æ³•çš„å®ç°ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(MessageQueue queue, Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">    msg.target = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">if</span> (mAsynchronous) &#123;</div><div class="line">        msg.setAsynchronous(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> queue.enqueueMessage(msg, uptimeMillis);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æ­¤æ–¹æ³•ä¼šæŠŠå½“å‰<code>Handler</code>è®¾ç½®ä¸º<code>msg</code>çš„<code>target</code>ï¼Œè¿™ä¸ª<code>target</code>çš„ä½œç”¨æˆ‘ä»¬ç­‰ä¼šå†è¯´ã€‚ç„¶åå°±æ˜¯è°ƒç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„<code>enqueueMessage</code>æ–¹æ³•ï¼Œæ¯«æ— ç–‘é—®ï¼Œå°±æ˜¯æŠŠæ¶ˆæ¯å…¥é˜Ÿäº†ã€‚æˆ‘ä»¬çœ‹æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(Message msg, <span class="keyword">long</span> when)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (msg.target == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Message must have a target."</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (msg.isInUse()) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg + <span class="string">" This message is already in use."</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (mQuitting) &#123;</div><div class="line">            IllegalStateException e = <span class="keyword">new</span> IllegalStateException(</div><div class="line">                    msg.target + <span class="string">" sending message to a Handler on a dead thread"</span>);</div><div class="line">            Log.w(TAG, e.getMessage(), e);</div><div class="line">            msg.recycle();</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        msg.markInUse();</div><div class="line">        msg.when = when;</div><div class="line">        Message p = mMessages;</div><div class="line">        <span class="keyword">boolean</span> needWake;</div><div class="line">        <span class="keyword">if</span> (p == <span class="keyword">null</span> || when == <span class="number">0</span> || when &lt; p.when) &#123;</div><div class="line">            <span class="comment">// New head, wake up the event queue if blocked.</span></div><div class="line">            msg.next = p;</div><div class="line">            mMessages = msg;</div><div class="line">            needWake = mBlocked;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            needWake = mBlocked &amp;&amp; p.target == <span class="keyword">null</span> &amp;&amp; msg.isAsynchronous();</div><div class="line">            Message prev;</div><div class="line">            <span class="keyword">for</span> (;;) &#123;</div><div class="line">                prev = p;</div><div class="line">                p = p.next;</div><div class="line">                <span class="keyword">if</span> (p == <span class="keyword">null</span> || when &lt; p.when) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</div><div class="line">                    needWake = <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            msg.next = p; <span class="comment">// invariant: p == prev.next</span></div><div class="line">            prev.next = msg;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// We can assume mPtr != 0 because mQuitting is false.</span></div><div class="line">        <span class="keyword">if</span> (needWake) &#123;</div><div class="line">            nativeWake(mPtr);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆåˆ¤æ–­<code>msg</code>çš„<code>target</code>æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºæŠ›å¼‚å¸¸ï¼Œç”±æ­¤æˆ‘ä»¬çœ‹å‡º<code>target</code>åœ¨åé¢ä¼šæœ‰å¤§ä½œç”¨ã€‚å…¶æ¬¡åˆ¤æ–­æ­¤æ¶ˆæ¯æ˜¯å¦å·²ç»åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å»ã€‚ç„¶åè®¾ç½®<code>msg</code>ä¸ºå·²åŠ å…¥æ ‡è®°ï¼Œ<code>msg</code>è§¦å‘æ—¶é—´ï¼Œè¿™é‡Œä¼šå–å‡ºä¹‹å‰çš„æ¶ˆæ¯ï¼Œé¦–å…ˆä½ è¦çŸ¥é“ï¼Œ<code>MessageQueue</code>å¹¶æ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªé›†åˆæŠŠæ‰€æœ‰çš„æ¶ˆæ¯éƒ½ä¿å­˜èµ·æ¥ï¼Œå®ƒåªä½¿ç”¨äº†ä¸€ä¸ª<code>Messages</code>å¯¹è±¡è¡¨ç¤ºå½“å‰å¾…å¤„ç†çš„æ¶ˆæ¯ï¼Œè€Œä¸”æ¯ä¸ª<code>Messages</code>å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ª<code>next</code>å­—æ®µï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ª<code>Messages</code>å¯¹è±¡ï¼Œç”±æ­¤å¯ä»¥ç»„æˆç±»ä¼¼äºé“¾è¡¨ä¸€æ ·çš„æ•°æ®ç»“æ„ã€‚è€Œä¸”è¿™é‡Œä¼šåˆ¤æ–­å½“å‰<code>msg</code>çš„è§¦å‘æ—¶é—´æ˜¯ä¸æ˜¯0ï¼Œå¦‚æœæ˜¯0ç›´æ¥åŠ å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨ã€‚å¦‚æœ<code>msg</code>çš„è§¦å‘æ—¶é—´ä¸æ˜¯0ï¼Œä¼šä¸€ç›´å¾ªç¯éå†å½“å‰<code>MessageQueue</code>å¯¹è±¡ä¸­çš„æ¶ˆæ¯é“¾è¡¨ï¼Œå¹¶æ¯”è¾ƒè§¦å‘æ—¶é—´ï¼Œé‡æ–°æ’åˆ—æ¶ˆæ¯é“¾è¡¨ã€‚å¦‚æ­¤ï¼Œå½“å‰æ¶ˆæ¯å·²ç»è¢«æ’å…¥åˆ°æ•´ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚</p>
<p>æˆ‘ä»¬ä¼šç–‘æƒ‘ï¼Œä»£ç åˆ°è¿™é‡Œå·²ç»æ²¡æœ‰äº†ï¼Œä½†æ˜¯<code>Handler</code>åˆæ˜¯å¦‚ä½•æ¥æ”¶åˆ°æ¶ˆæ¯çš„å‘¢ï¼Ÿ</p>
<p>ä¸çŸ¥é“å¤§å®¶æ³¨æ„æ²¡ï¼Œæˆ‘ä»¬åœ¨çœ‹<code>ActivityThread</code>ä¸­çš„<code>main()</code>æ–¹æ³•ä¸­ï¼Œæœ‰æ²¡æœ‰è¿˜çœ‹åˆ°è¿™æ ·ä¸€å¥ä»£ç ï¼š<code>Looper.loop()</code>ï¼Œè¿™å¥ä»£ç ä¼šä¸ä¼šå’Œæˆ‘ä»¬çš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰å…³ç³»å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥åšä¸ªè¯•éªŒï¼šæˆ‘ä»¬åœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ª<code>Handler</code>ï¼Œå¹¶ä¸”å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä½†æ˜¯æˆ‘ä»¬åªè°ƒç”¨<code>Looper.prepare()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬æ˜¯å¦èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">requestData</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Looper.prepare();</div><div class="line">                Handler handler = <span class="keyword">new</span> Handler(<span class="keyword">new</span> Handler.Callback() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">                    	<span class="comment">//æ ‡è®°ä¸€ä¸‹æ¥å—åˆ°æ¶ˆæ¯</span></div><div class="line">                        Log.d(<span class="string">"msg"</span>,<span class="string">"æ¥æ”¶åˆ°æ¶ˆæ¯"</span>);</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">                <span class="comment">//å­çº¿ç¨‹æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></div><div class="line">                Thread.sleep(<span class="number">3000</span>);</div><div class="line">				   <span class="comment">//å‘é€æ¶ˆæ¯</span></div><div class="line">                handler.sendMessage(<span class="keyword">new</span> Message());</div><div class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;).start();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œç¨‹åºä»¥åï¼Œåœ¨æ§åˆ¶å°å¹¶æ²¡æœ‰çœ‹åˆ°æ‰“å°çš„ä¿¡æ¯ï¼Œç„¶åæˆ‘ä»¬åœ¨<code>handler.sendMessage(new Message())</code>åé¢æ·»åŠ <code>Looper.loop()</code>ä»£ç ï¼Œå†æ¬¡è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°æœ‰ä¿¡æ¯æ‰“å°ï¼Œæ³¨æ„ï¼Œ<code>Looper.loop()</code>ä¼šé€ æˆä»£ç é˜»å¡ï¼Œå¿…é¡»æ”¾åœ¨ä»£ç çš„æœ€åé¢ã€‚ ç”±æ­¤æˆ‘ä»¬å¯ä»¥ç¡®ä¿¡ï¼Œæ¶ˆæ¯çš„å‘é€ç¡®å®å’Œ<code>Looper.loop()</code>æ–¹æ³•æœ‰å¾ˆå¤§å…³ç³»ï¼Œæˆ‘ä»¬çœ‹æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</div><div class="line">	 <span class="comment">//è·å–å½“å‰çº¿ç¨‹çš„Looper</span></div><div class="line">    <span class="keyword">final</span> Looper me = myLooper();</div><div class="line">    <span class="keyword">if</span> (me == <span class="keyword">null</span>) &#123;</div><div class="line">        <span class="comment">//å¦‚æœå½“å‰çº¿ç¨‹æ²¡æœ‰Looper æŠ›å‡ºå¼‚å¸¸    </span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"No Looper; Looper.prepare() wasn't called on this thread."</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//æ‹¿åˆ°å½“å‰Looperçš„æ¶ˆæ¯é˜Ÿåˆ—</span></div><div class="line">    <span class="keyword">final</span> MessageQueue queue = me.mQueue;</div><div class="line">	</div><div class="line">    Binder.clearCallingIdentity();</div><div class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ident = Binder.clearCallingIdentity();</div><div class="line">    </div><div class="line">	 <span class="comment">//æ­»å¾ªç¯å½“å‰æ¶ˆæ¯é˜Ÿåˆ—</span></div><div class="line">    <span class="keyword">for</span> (;;) &#123;</div><div class="line">        Message msg = queue.next(); <span class="comment">// might block</span></div><div class="line">        <span class="keyword">if</span> (msg == <span class="keyword">null</span>) &#123;</div><div class="line">        	<span class="comment">//æ²¡æœ‰æ¶ˆæ¯è¿”å›</span></div><div class="line">           <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// This must be in a local variable, in case a UI event sets the logger</span></div><div class="line">        <span class="keyword">final</span> Printer logging = me.mLogging;</div><div class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) &#123;</div><div class="line">            logging.println(<span class="string">"&gt;&gt;&gt;&gt;&gt; Dispatching to "</span> + msg.target + <span class="string">" "</span> +</div><div class="line">                    msg.callback + <span class="string">": "</span> + msg.what);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> traceTag = me.mTraceTag;</div><div class="line">        <span class="keyword">if</span> (traceTag != <span class="number">0</span> &amp;&amp; Trace.isTagEnabled(traceTag)) &#123;</div><div class="line">            Trace.traceBegin(traceTag, msg.target.getTraceName(msg));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">        	  <span class="comment">//æ‹¿åˆ°æ¶ˆæ¯ä¹‹å‰å­˜å‚¨çš„targetä¹Ÿå°±æ˜¯Handler å‘é€æ¶ˆæ¯</span></div><div class="line">            msg.target.dispatchMessage(msg);</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">if</span> (traceTag != <span class="number">0</span>) &#123;</div><div class="line">                Trace.traceEnd(traceTag);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) &#123;</div><div class="line">            logging.println(<span class="string">"&lt;&lt;&lt;&lt;&lt; Finished to "</span> + msg.target + <span class="string">" "</span> + msg.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Make sure that during the course of dispatching the</span></div><div class="line">        <span class="comment">// identity of the thread wasn't corrupted.</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> newIdent = Binder.clearCallingIdentity();</div><div class="line">        <span class="keyword">if</span> (ident != newIdent) &#123;</div><div class="line">            Log.wtf(TAG, <span class="string">"Thread identity changed from 0x"</span></div><div class="line">                    + Long.toHexString(ident) + <span class="string">" to 0x"</span></div><div class="line">                    + Long.toHexString(newIdent) + <span class="string">" while dispatching to "</span></div><div class="line">                    + msg.target.getClass().getName() + <span class="string">" "</span></div><div class="line">                    + msg.callback + <span class="string">" what="</span> + msg.what);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        msg.recycleUnchecked();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆä¼šåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æœ‰Looperï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥<code>Looper.loop()</code>ä¸€å®šè¦åœ¨<code>Looper.prepare()</code>æ–¹æ³•ä¹‹åï¼Œç„¶åæ‹¿åˆ°å½“å‰<code>Looper</code>çš„æ¶ˆæ¯é˜Ÿåˆ—<code>mQueue</code>ï¼Œä¹‹åè¿›å…¥æ— é™å¾ªç¯ï¼Œå–å‡ºç¬¬ä¸€æ¡æ¶ˆæ¯ï¼Œå¦‚æœæ²¡æœ‰æ¶ˆæ¯åˆ™é˜»å¡ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>Handler</code>å‘é€æ¶ˆæ¯ï¼Œè¿™ä¸ªæ—¶å€™åˆ™èƒ½é€šè¿‡å¾ªç¯å–åˆ°æ¶ˆæ¯ï¼Œä¹‹åè°ƒç”¨æ¶ˆæ¯çš„<code>target</code>çš„<code>dispatchMessage()</code>æ–¹æ³•æ¥å›è°ƒæ¶ˆæ¯ä¿¡æ¯ã€‚å…¶å®æ¶ˆæ¯çš„targetå°±æ˜¯<code>Handler</code>ã€‚</p>
<p>å†æ¥çœ‹çœ‹<code>Handler</code>çš„<code>dispatchMessage()</code>æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>&#123;  </div><div class="line">    <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123; </div><div class="line">    	 <span class="comment">//ä½¿ç”¨Handlerçš„postæ–¹æ³•å‘é€æ¶ˆæ¯ä¼šèµ°è¿™é‡Œ </span></div><div class="line">        handleCallback(msg);  </div><div class="line">    &#125; <span class="keyword">else</span> &#123;  </div><div class="line">        <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;  </div><div class="line">        	  <span class="comment">//ä½¿ç”¨Handlerçš„sendMessageæ–¹æ³•ä¼šèµ°è¿™é‡Œ</span></div><div class="line">            <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;  </div><div class="line">                <span class="keyword">return</span>;  </div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">        handleMessage(msg);  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨ä½¿ç”¨<code>Handler</code>çš„æœ‰å‚æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œä¼šä¼ ä¸€ä¸ª<code>Callback</code>å¯¹è±¡ï¼Œä»–æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•<code>handleMessage()</code>ï¼Œæ‰€ä»¥ä¼šå†æ¬¡èµ°æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ï¼Œä¼ é€’æ¶ˆæ¯ã€‚</p>
<p>è‡³æ­¤ï¼Œå…³äº<code>Looper</code>ã€<code>Handler</code>ã€<code>Message</code>è¿™ä¸‰è€…å…³ç³»æˆ‘ä»¬å·²ç»éå¸¸æ¸…æ¥šäº†ï¼Œæ¥å¼ å›¾è§£é‡Šä¸€ä¸‹ï¼š</p>
<div align="center"><br><img src="http://img.blog.csdn.net/20140805002935859?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG1qNjIzNTY1Nzkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"><br></div>


<p>å¦å¤–é™¤äº†è¿˜æœ‰ä¸€ç§å‘é€æ¶ˆæ¯çš„æ–¹æ³•ï¼š<code>Handler</code>çš„<code>post()</code>æ–¹æ³•ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹<code>post()</code>æ–¹æ³•çš„å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">post</span><span class="params">(Runnable r)</span></span></div><div class="line">&#123;</div><div class="line">   <span class="keyword">return</span>  sendMessageDelayed(getPostMessage(r), <span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸæ¥è¿™é‡Œè¿˜æ˜¯è°ƒç”¨äº†sendMessageDelayed()æ–¹æ³•å»å‘é€ä¸€æ¡æ¶ˆæ¯å•Šï¼Œå¹¶ä¸”è¿˜ä½¿ç”¨äº†getPostMessage()æ–¹æ³•å°†Runnableå¯¹è±¡è½¬æ¢æˆäº†ä¸€æ¡æ¶ˆæ¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•çš„æºç ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Message <span class="title">getPostMessage</span><span class="params">(Runnable r)</span> </span>&#123;</div><div class="line">    Message m = Message.obtain();</div><div class="line">    m.callback = r;</div><div class="line">    <span class="keyword">return</span> m;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å°†æ¶ˆæ¯çš„callbackå­—æ®µçš„å€¼æŒ‡å®šä¸ºä¼ å…¥çš„Runnableå¯¹è±¡ã€‚å’¦ï¼Ÿè¿™ä¸ªcallbackå­—æ®µçœ‹èµ·æ¥æœ‰äº›çœ¼ç†Ÿå•Šï¼Œå–”ï¼åœ¨Handlerçš„dispatchMessage()æ–¹æ³•ä¸­åŸæ¥æœ‰åšä¸€ä¸ªæ£€æŸ¥ï¼Œå¦‚æœMessageçš„callbackç­‰äºnullæ‰ä¼šå»è°ƒç”¨handleMessage()æ–¹æ³•ï¼Œå¦åˆ™å°±è°ƒç”¨handleCallback()æ–¹æ³•ã€‚é‚£æˆ‘ä»¬å¿«æ¥çœ‹ä¸‹handleCallback()æ–¹æ³•ä¸­çš„ä»£ç å§ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">handleCallback</span><span class="params">(Message message)</span> </span>&#123;</div><div class="line">    message.callback.run();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿå¤ªç®€å•äº†ï¼ç«Ÿç„¶å°±æ˜¯ç›´æ¥è°ƒç”¨äº†ä¸€å¼€å§‹ä¼ å…¥çš„Runnableå¯¹è±¡çš„run()æ–¹æ³•ã€‚å› æ­¤åœ¨å­çº¿ç¨‹ä¸­é€šè¿‡Handlerçš„post()æ–¹æ³•è¿›è¡ŒUIæ“ä½œå°±å¯ä»¥è¿™ä¹ˆå†™ï¼š<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;  </div><div class="line">  </div><div class="line">    <span class="keyword">private</span> Handler handler;  </div><div class="line">  </div><div class="line">    <span class="meta">@Override</span>  </div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;  </div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);  </div><div class="line">        setContentView(R.layout.activity_main);  </div><div class="line">        handler = <span class="keyword">new</span> Handler();  </div><div class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">            <span class="meta">@Override</span>  </div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">                handler.post(<span class="keyword">new</span> Runnable() &#123;  </div><div class="line">                    <span class="meta">@Override</span>  </div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  </div><div class="line">                        <span class="comment">// åœ¨è¿™é‡Œè¿›è¡ŒUIæ“ä½œ  </span></div><div class="line">                    &#125;  </div><div class="line">                &#125;);  </div><div class="line">            &#125;  </div><div class="line">        &#125;).start();  </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è™½ç„¶å†™æ³•ä¸Šç›¸å·®å¾ˆå¤šï¼Œä½†æ˜¯åŸç†æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åœ¨Runnableå¯¹è±¡çš„run()æ–¹æ³•é‡Œæ›´æ–°UIï¼Œæ•ˆæœå®Œå…¨ç­‰åŒäºåœ¨handleMessage()æ–¹æ³•ä¸­æ›´æ–°UIã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šæ‰€æœ‰æºç çš„åˆ†æï¼Œæˆ‘ä»¬å·²ç»å‘ç°äº†ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨å“ªç§æ–¹æ³•åœ¨å­çº¿ç¨‹ä¸­æ›´æ–°UIï¼Œå…¶å®èƒŒåçš„åŸç†éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¿…é¡»éƒ½è¦å€ŸåŠ©å¼‚æ­¥æ¶ˆæ¯å¤„ç†çš„æœºåˆ¶æ¥å®ç°ï¼Œè€Œæˆ‘ä»¬åˆå·²ç»å°†è¿™ä¸ªæœºåˆ¶çš„æµç¨‹å®Œå…¨ææ˜ç™½äº†ã€‚çœŸå¥½ã€‚</p>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/04/01/ä¸€å¤©ä¸€Androidä¹‹Fragment/"  data-tooltip="ä¸€å¤©ä¸€Androidä¹‹Fragment">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/24/ä¸€å¤©ä¸€Androidä¹‹æ•°æ®æŒä¹…åŒ–æŠ€æœ¯/" data-tooltip="ä¸€å¤©ä¸€Androidä¹‹æ•°æ®æŒä¹…åŒ–æŠ€æœ¯">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://v.t.sina.com.cn/share/share.php?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/&amp;title=ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶">
                <i class="fa fa-weibo"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/">
                <i class="fa fa-qq"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default"  href="javascript:show();" >
                <i class="fa fa-wechat (alias)"></i>
            </a>
        </li>
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
<div id="jiathis_weixin_modal" style="z-index:1000;display:none; background-clip: padding-box;background-color: #FFFFFF;border: 1px solid rgba(0, 0, 0, 0.3);  border-radius: 6px 6px 6px 6px;  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); left: 50%; margin: -200px 0 0 -200px;overflow: hidden; position: fixed; top: 50%; width:360px;height:370px; overflow:hidden;" class="jiathis_weixin_modal"><div class="jiathis_modal_header" id="jiathis_modal_header" style="border-bottom: 1px solid #EEEEEE; padding: 9px 15px;"><a style="text-decoration:none;  margin-top: 2px; color: #000000; float: right;  font-size: 20px;  font-weight: bold; cursor:pointer;line-height: 20px; opacity: 0.2; text-shadow: 0 1px 0 #FFFFFF;" class="jiathis_weixin_close" id="jiathis_weixin_close" href="javascript:hidden();" target="_self">Ã—</a><h3 id="jiathis_weixin_h3" style=" line-height: 30px; margin: 0; font-weight:normal; font-family:" å¾®è½¯é›…é»‘";"="">åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</h3></div><div class="jiathis_modal_body" id="jiathis_modal_body" style="text-align:center;height:251px;"><p id="jiathis_webchat"><img alt="äºŒç»´ç åŠ è½½å¤±è´¥..." style="margin-top: 15px;" src="http://s.jiathis.com/qrcode.php?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/" height="220" width="220"></p></div><div class="jiathis_modal_footer" id="jiathis_modal_footer" style="border-radius: 0 0 6px 6px; border-top: 1px solid #DDDDDD; box-shadow: 0 1px 0 #FFFFFF inset; height:100%;padding:0 10px;padding-top:11px;text-align: right; font-size:12px;"><div id="jiathis_weixin_tip" style="text-align:left;margin:0; padding:0;font-size:12px;background-color: #FFFFFF;">æ‰“å¼€å¾®ä¿¡ï¼Œç‚¹å‡»åº•éƒ¨çš„â€œå‘ç°â€ï¼Œä½¿ç”¨ â€œæ‰«ä¸€æ‰«â€ å³å¯å°†ç½‘é¡µåˆ†äº«åˆ°æˆ‘çš„æœ‹å‹åœˆã€‚</div></div></div>

<script charset="utf-8">
    function show(){
        $("#jiathis_weixin_modal").css("display", "block")
    }
    function hidden(){
        $("#jiathis_weixin_modal").css("display", "none")
    } 
</script>







        
            
                
<div class="duoshuo">
<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
<script>
var cloudTieConfig = {
  url: document.location.href, 
  sourceId: "",
  productKey: "3b1a42e3f91145d197b9e8b6e2f2a144",
  target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
</script>
</div>



            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 è´µæ°¸å†¬. All Rights Reserved.
    </span>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/04/01/ä¸€å¤©ä¸€Androidä¹‹Fragment/"  data-tooltip="ä¸€å¤©ä¸€Androidä¹‹Fragment">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/03/24/ä¸€å¤©ä¸€Androidä¹‹æ•°æ®æŒä¹…åŒ–æŠ€æœ¯/" data-tooltip="ä¸€å¤©ä¸€Androidä¹‹æ•°æ®æŒä¹…åŒ–æŠ€æœ¯">
                
                    <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://v.t.sina.com.cn/share/share.php?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/&amp;title=ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶">
                <i class="fa fa-weibo"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/">
                <i class="fa fa-qq"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default"  href="javascript:show();" >
                <i class="fa fa-wechat (alias)"></i>
            </a>
        </li>
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>
<div id="jiathis_weixin_modal" style="z-index:1000;display:none; background-clip: padding-box;background-color: #FFFFFF;border: 1px solid rgba(0, 0, 0, 0.3);  border-radius: 6px 6px 6px 6px;  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); left: 50%; margin: -200px 0 0 -200px;overflow: hidden; position: fixed; top: 50%; width:360px;height:370px; overflow:hidden;" class="jiathis_weixin_modal"><div class="jiathis_modal_header" id="jiathis_modal_header" style="border-bottom: 1px solid #EEEEEE; padding: 9px 15px;"><a style="text-decoration:none;  margin-top: 2px; color: #000000; float: right;  font-size: 20px;  font-weight: bold; cursor:pointer;line-height: 20px; opacity: 0.2; text-shadow: 0 1px 0 #FFFFFF;" class="jiathis_weixin_close" id="jiathis_weixin_close" href="javascript:hidden();" target="_self">Ã—</a><h3 id="jiathis_weixin_h3" style=" line-height: 30px; margin: 0; font-weight:normal; font-family:" å¾®è½¯é›…é»‘";"="">åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</h3></div><div class="jiathis_modal_body" id="jiathis_modal_body" style="text-align:center;height:251px;"><p id="jiathis_webchat"><img alt="äºŒç»´ç åŠ è½½å¤±è´¥..." style="margin-top: 15px;" src="http://s.jiathis.com/qrcode.php?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/" height="220" width="220"></p></div><div class="jiathis_modal_footer" id="jiathis_modal_footer" style="border-radius: 0 0 6px 6px; border-top: 1px solid #DDDDDD; box-shadow: 0 1px 0 #FFFFFF inset; height:100%;padding:0 10px;padding-top:11px;text-align: right; font-size:12px;"><div id="jiathis_weixin_tip" style="text-align:left;margin:0; padding:0;font-size:12px;background-color: #FFFFFF;">æ‰“å¼€å¾®ä¿¡ï¼Œç‚¹å‡»åº•éƒ¨çš„â€œå‘ç°â€ï¼Œä½¿ç”¨ â€œæ‰«ä¸€æ‰«â€ å³å¯å°†ç½‘é¡µåˆ†äº«åˆ°æˆ‘çš„æœ‹å‹åœˆã€‚</div></div></div>

<script charset="utf-8">
    function show(){
        $("#jiathis_weixin_modal").css("display", "block")
    }
    function hidden(){
        $("#jiathis_weixin_modal").css("display", "none")
    } 
</script>







                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/">
                <i class="fa fa-weibo"></i><span>å¾®åš</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/">
                <i class="fa fa-qq"></i><span>QQ</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn"  href="javascript:show();" >
                <i class="fa fa-wechat (alias)"></i><span>å¾®ä¿¡</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>



<div id="jiathis_weixin_modal" style="display:none; background-clip: padding-box;background-color: #FFFFFF;border: 1px solid rgba(0, 0, 0, 0.3);  border-radius: 6px 6px 6px 6px;  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); left: 50%; margin: -200px 0 0 -200px;overflow: hidden; position: fixed; top: 50%; width:360px;height:370px; overflow:hidden;" class="jiathis_weixin_modal"><div class="jiathis_modal_header" id="jiathis_modal_header" style="border-bottom: 1px solid #EEEEEE; padding: 9px 15px;"><a style="text-decoration:none;  margin-top: 2px; color: #000000; float: right;  font-size: 20px;  font-weight: bold; cursor:pointer;line-height: 20px; opacity: 0.2; text-shadow: 0 1px 0 #FFFFFF;" class="jiathis_weixin_close" id="jiathis_weixin_close" href="javascript:hidden();" target="_self">Ã—</a><h3 id="jiathis_weixin_h3" style=" line-height: 30px; margin: 0; font-weight:normal; font-family:" å¾®è½¯é›…é»‘";"="">åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ</h3></div><div class="jiathis_modal_body" id="jiathis_modal_body" style="text-align:center;height:251px;"><p id="jiathis_webchat"><img alt="äºŒç»´ç åŠ è½½å¤±è´¥..." style="margin-top: 15px;" src="http://s.jiathis.com/qrcode.php?url=http://www.guiyongdong.com/2017/03/27/ä¸€å¤©ä¸€Androidä¹‹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶/" height="220" width="220"></p></div><div class="jiathis_modal_footer" id="jiathis_modal_footer" style="border-radius: 0 0 6px 6px; border-top: 1px solid #DDDDDD; box-shadow: 0 1px 0 #FFFFFF inset; height:100%;padding:0 10px;padding-top:11px;text-align: right; font-size:12px;"><div id="jiathis_weixin_tip" style="text-align:left;margin:0; padding:0;font-size:12px;background-color: #FFFFFF;">æ‰“å¼€å¾®ä¿¡ï¼Œç‚¹å‡»åº•éƒ¨çš„â€œå‘ç°â€ï¼Œä½¿ç”¨ â€œæ‰«ä¸€æ‰«â€ å³å¯å°†ç½‘é¡µåˆ†äº«åˆ°æˆ‘çš„æœ‹å‹åœˆã€‚</div></div></div>

<script charset="utf-8">
    function show(){
        $("#jiathis_weixin_modal").css("display", "block")
    }
    function hidden(){
        $("#jiathis_weixin_modal").css("display", "none")
    } 
</script>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/header.jpg" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
            <h4 id="about-card-name">è´µæ°¸å†¬</h4>
        
            <div id="about-card-bio"><p>iOSå¼€å‘è€…<br> ä¼šä¸€ç‚¹RNå’Œandroid,  åè¶³çš„æµ·è´¼è¿·</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>éƒ‘å·å¸‚æ—¶ç©ºéš§é“ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                æ²³å— éƒ‘å·
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">æ²¡æœ‰æ‰¾åˆ°æ–‡ç« </div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/08/11/åˆè¯†ReactiveCocoa/">
                            <h3 class="media-heading">åˆè¯†ReactiveCocoa</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´8æœˆ11æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><a href="https://github.com/ReactiveCocoa/ReactiveCocoa">ReactiveCocoa</a>(ç®€ç§°ä¸ºRAC), æ˜¯ç”±Githubå¼€æºçš„ä¸€ä¸ªåº”ç”¨äºiOSå’ŒOSå¼€å‘çš„æ–°æ¡†æ¶, RACå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹å’Œå“åº”å¼ç¼–ç¨‹çš„ç‰¹æ€§, é€šè¿‡è¿™ç¯‡æ–‡ç« å¯¹RACæœ‰ä¸€ä¸ªç®€å•çš„äº†è§£ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/08/12/æ·±å…¥ReactiveCocoa/">
                            <h3 class="media-heading">æ·±å…¥ReactiveCocoa</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´8æœˆ12æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><a href="https://github.com/ReactiveCocoa/ReactiveCocoa">ReactiveCocoa</a>(ç®€ç§°ä¸ºRAC),ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç®€å•çš„å¯¹RACæœ‰ä¸ªåˆæ­¥çš„äº†è§£ï¼Œåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å®é™…ç”¨åˆ°çš„åŸºæœ¬éƒ½æ˜¯ä¸Šä¸€ç¯‡æ‰€ä»‹ç»çš„çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å¯¹RACæœ‰ä¸ªæ·±å…¥çš„äº†è§£ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/06/ReactiveCocoaå’ŒRXSwifté€ŸæŸ¥è¡¨/">
                            <h3 class="media-heading">ReactiveCocoaå’ŒRXSwifté€ŸæŸ¥è¡¨</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ6æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>åœ¨æ¥è§¦äº†RACä»¥å,å¯¹RACæœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œè¿™é‡Œæ•´ç†äº†ä¸€ä¸‹RACè„‘å›¾ï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹ã€‚ps(<a href="https://github.com/aiqiuqiu/FRPCheatSheeta">è½¬è½½</a>)</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/06/å…³äºRACçš„ä¸€äº›èµ„æ–™/">
                            <h3 class="media-heading">å…³äºRACçš„ä¸€äº›èµ„æ–™</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ6æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>çœ‹äº†è¿™ä¹ˆå¤šRACèµ„æ–™ï¼Œåœ¨è¿™é‡Œæˆ‘æ•´ç†äº†ä¸€ä¸‹ï¼Œä»¥å¤‡å­¦ä¹ ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/08/RunLoopæ€»ç»“/">
                            <h3 class="media-heading">RunLoopæ€»ç»“</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ8æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>æœ€è¿‘ç ”ç©¶äº†ä¸€ä¸‹RunLoopï¼Œåœ¨è¿™é‡Œå¯¹RunLoopåšä¸€ä¸ªæ€»ç»“ï¼Œä¸»è¦æ˜¯å¯¹<code>&lt;CoreFoundation/CFRunLoop.h&gt;</code>çš„å¤´æ–‡ä»¶å‡½æ•°æ€»ç»“ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/13/èŠä¸€èŠGCDçš„é‚£äº›äº‹/">
                            <h3 class="media-heading">èŠä¸€èŠGCDçš„é‚£äº›äº‹</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ13æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>GCDæ˜¯iOSå¼€å‘ä¸­ç»å¸¸ä½¿ç”¨åˆ°çš„æŠ€æœ¯ï¼Œæœ€è¿‘å·¥ä½œæ¯”è¾ƒæ‚ é—²ï¼Œæœ‰æ—¶é—´å¯¹GCDåšä¸€ä¸ªå…¨é¢çš„å­¦ä¹ ï¼Œè¿™ç¯‡æ–‡ç« å°†å¯¹GCDåšä¸€ä¸ªå…¨é¢çš„è§£æã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/18/èŠä¸€èŠNSOperationçš„é‚£äº›äº‹/">
                            <h3 class="media-heading">èŠä¸€èŠNSOperationçš„é‚£äº›äº‹</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ18æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>åœ¨iOSå¼€å‘ä¸­ï¼Œå¤šçº¿ç¨‹æŠ€æœ¯ç”¨åˆ°æœ€å¤šçš„å°±æ˜¯GCDå’ŒNSOperationï¼Œä¸Šä¸€ç¯‡æ–‡ç« å·²ç»å¯¹GCDæœ‰äº†å…¨é¢çš„äº†è§£ï¼Œè¿™ç¯‡æ–‡ç« ç®€å•çš„èŠä¸€èŠNSOperationã€‚<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/21/iOSåŠ¨ç”»ç¯‡-transfrom/">
                            <h3 class="media-heading">iOSåŠ¨ç”»ç¯‡ä¹‹UIViewåŠ¨ç”»</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ21æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>UIKitç›´æ¥å°†åŠ¨ç”»é›†æˆåˆ°UIViewç±»ä¸­ï¼Œå½“å†…éƒ¨çš„ä¸€äº›å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒUIViewå°†ä¸ºè¿™äº›æ”¹å˜æä¾›åŠ¨ç”»æ”¯æŒã€‚<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/22/iOSåŠ¨ç”»ç¯‡ä¹‹CoreAnimationåŠ¨ç”»/">
                            <h3 class="media-heading">iOSåŠ¨ç”»ç¯‡ä¹‹CoreAnimationåŠ¨ç”»</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ22æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Appå¦‚æœæƒ³è¢«å¤§ä¼—å–œæ¬¢ï¼Œæ¼‚äº®çš„UIå’Œç²¾ç¾çš„åŠ¨ç”»éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œè‹¹æœè™½ç„¶ä¸ºUIViewæä¾›äº†ä¸€äº›å¸¸ç”¨åŠ¨ç”»ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çœ‹èµ·æ¥æ¯”è¾ƒä¸é”™çš„æ•ˆæœéƒ½æ˜¯é€šè¿‡æ“ä½œLayerå±‚å®ç°çš„ï¼Œå› æ­¤äº†è§£æ ¸å¿ƒåŠ¨ç”»æ˜¯å¿…è¦çš„.CoreAnimationæ˜¯ç›´æ¥ä½œç”¨åœ¨CALayerä¸Šçš„(å¹¶éUIViewä¸Š)éå¸¸å¼ºå¤§çš„è·¨Mac OS Xå’ŒiOSå¹³å°çš„åŠ¨ç”»å¤„ç†APIï¼ŒCore Animationçš„åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯åœ¨åå°æ“ä½œçš„ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<br></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://www.guiyongdong.com/2016/09/22/iOSåŠ¨ç”»ä¹‹CATransitionåŠ¨ç”»/">
                            <h3 class="media-heading">iOSåŠ¨ç”»ä¹‹CATransitionåŠ¨ç”»</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016å¹´9æœˆ22æ—¥
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>ä»Šå¤©ä¸»è¦ç”¨åˆ°çš„åŠ¨ç”»ç±»æ˜¯CALayerä¸‹çš„CATransitionè‡³äºå„ç§åŠ¨ç”»ç±»ä¸­å¦‚ä½•ç»§æ‰¿çš„åœ¨è¿™ä¹Ÿä¸åšèµ˜è¿°ï¼Œç½‘ä¸Šçš„èµ„æ–™æ˜¯ä¸€æŠ“ä¸€å¤§æŠŠã€‚å¥½åºŸè¯å°‘è¯´åˆ‡å…¥ä»Šå¤©çš„æ­£é¢˜ã€‚</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="æ²¡æœ‰æ‰¾åˆ°æ–‡ç« "
                data-message-one="æ‰¾åˆ° 1 ç¯‡æ–‡ç« "
                data-message-other="æ‰¾åˆ° {n} ç¯‡æ–‡ç« ">
                æ‰¾åˆ° 42 ç¯‡æ–‡ç« 
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-rt08quwts7iav5x0cfd2ym0gb5qkd1lvrsmwrakxtkhefmaaes4ywkmnjnwf.min.js"></script>
<script src="/assets/js/prism.js"></script>
<!--SCRIPTS END-->

    
        <script type="text/javascript">
            var duoshuoQuery = {short_name:'guiyongdong'};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>
    



    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('DWKE0MOOLY', '141d50cf933ece6dd635747973c4fe00');
        var algoliaIndex = algoliaClient.initIndex('blog');
    </script>

    </body>
</html>
